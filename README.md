📂 檔案 1：主程式腳本 (cloudns_ddns.sh)
這個腳本已經整理乾淨，移除了包裝指令，是可以直接執行的版本。它包含了：Root 權限檢查、UTC+8 時區校正、互動式輸入金鑰與時間、寫入 Crontab。

Bash

#!/bin/bash

# =================================================================
# ClouDNS Daily Auto-Updater (UTC+8)
# 一鍵設定 ClouDNS 每日定時更新腳本
#
# 功能：
# 1. 自動校正系統時區為 Asia/Taipei (UTC+8)
# 2. 互動式輸入 ClouDNS Dynamic URL
# 3. 指定每日執行時間 (HH:MM)
# 4. 自動設定 Crontab 排程
# =================================================================

# --- 顏色定義 ---
GREEN='\033[0;32m'
CYAN='\033[0;36m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
NC='\033[0m'

clear
echo -e "${GREEN}#################################################${NC}"
echo -e "${GREEN}#      ClouDNS DDNS 每日定時任務設定精靈        #${NC}"
echo -e "${GREEN}#     (Daily Update / UTC+8 Timezone Support)   #${NC}"
echo -e "${GREEN}#################################################${NC}"

# 1. 檢查 Root 權限
if [ "$EUID" -ne 0 ]; then
  echo -e "${RED}[Error] 請使用 root 權限執行此腳本 (sudo -i)${NC}"
  exit 1
fi

# 2. 設定時區 (確保是東八區 UTC+8)
echo -e "\n${CYAN}>>> 正在校正系統時區為 東八區 (Asia/Taipei)...${NC}"
if command -v timedatectl &> /dev/null; then
    timedatectl set-timezone Asia/Taipei
else
    ln -sf /usr/share/zoneinfo/Asia/Taipei /etc/localtime
fi
echo -e "✅ 當前系統時間: $(date '+%Y-%m-%d %H:%M:%S')"

# 3. 步驟一：詢問 DDNS 金鑰 (URL)
echo -e "\n${YELLOW}【步驟 1】設定 DDNS 金鑰${NC}"
echo "請輸入您的 ClouDNS Dynamic URL (例如: https://ipv4.cloudns.net/...)"
read -p "URL: " DDNS_URL

if [[ -z "$DDNS_URL" ]]; then
    echo -e "${RED}[Error] URL 不能為空！${NC}"
    exit 1
fi

# 4. 步驟二：詢問每日執行時間
echo -e "\n${YELLOW}【步驟 2】設定每天啟動時間 (24小時制)${NC}"
read -p "請問要每天幾點執行? (輸入 0-23): " RUN_HOUR
read -p "請問要幾分執行? (輸入 0-59): " RUN_MINUTE

if ! [[ "$RUN_HOUR" =~ ^[0-9]+$ ]] || ! [[ "$RUN_MINUTE" =~ ^[0-9]+$ ]]; then
    echo -e "${RED}[Error] 時間格式錯誤，請輸入數字！${NC}"
    exit 1
fi

# 5. 步驟三：部署腳本
echo -e "\n${CYAN}>>> 正在部署自動化腳本...${NC}"

TARGET_SCRIPT="/usr/local/bin/cloudns_daily_update.sh"
LOG_FILE="/var/log/cloudns_ddns.log"

# 建立實際執行的腳本
cat > "$TARGET_SCRIPT" <<ENDSCRIPT
#!/bin/bash
# Auto-generated by setup script
# Run Time: Daily at $RUN_HOUR:$RUN_MINUTE

NOW=\$(date '+%Y-%m-%d %H:%M:%S')
RESPONSE=\$(curl -s -w "%{http_code}" "$DDNS_URL")

if [[ "\$RESPONSE" == *"200"* ]]; then
    echo "\$NOW [SUCCESS] DDNS Updated (HTTP 200)" >> $LOG_FILE
else
    echo "\$NOW [FAIL] DDNS Update Error (HTTP \$RESPONSE)" >> $LOG_FILE
fi

# Log Rotation (Keep last 50 lines)
tail -n 50 $LOG_FILE > ${LOG_FILE}.tmp && mv ${LOG_FILE}.tmp $LOG_FILE
ENDSCRIPT

chmod +x "$TARGET_SCRIPT"

# 6. 設定 Crontab
CRON_CMD="$RUN_MINUTE $RUN_HOUR * * * $TARGET_SCRIPT"
(crontab -l 2>/dev/null | grep -v "cloudns_daily_update.sh"; echo "$CRON_CMD") | crontab -

echo -e "\n${GREEN}🎉 設定完成 (Setup Complete)！${NC}"
echo -e "----------------------------------------------------"
echo -e "📅 頻率 (Freq): 每天 (Daily)"
echo -e "⏰ 時間 (Time): ${YELLOW}${RUN_HOUR}:${RUN_MINUTE}${NC} (Asia/Taipei)"
echo -e "📄 腳本 (Script): $TARGET_SCRIPT"
echo -e "📝 日誌 (Log): $LOG_FILE"
echo -e "----------------------------------------------------"

echo -e "\n正在執行連線測試..."
$TARGET_SCRIPT
echo -e "測試結束，請檢查日誌。"
📄 檔案 2：專案說明 (README.md)
這份文件會顯示在 GitHub 專案的首頁。我幫您寫了中文說明，強調了它的特點。

Markdown

# ClouDNS Daily Auto-Updater (Bash Script)

這是一個簡單、高效的 Bash 腳本，用於自動設定 **ClouDNS Dynamic DNS (DDNS)** 的定時更新任務。
專為需要 **固定每日時間執行** 且位於 **東八區 (UTC+8)** 的伺服器環境設計。

## ✨ 功能特點 (Features)

* **自動時區校正**：強制將系統時區設定為 `Asia/Taipei` (UTC+8)，確保定時任務準時執行。
* **每日定時**：互動式詢問每天幾點幾分執行，而非間隔循環。
* **一鍵部署**：自動產生執行腳本、設定權限、寫入 Crontab 排程。
* **日誌管理**：自動記錄更新狀態，並限制日誌行數，防止佔用空間。
* **隱私安全**：腳本透過互動輸入 URL，**不會**將您的金鑰硬編碼在腳本中。

## 🚀 使用方法 (Usage)

### 1. 下載腳本
```bash
git clone　https://github.com/passerby7890/cloudns_ddns.git
cd cloudns_ddns

2. 賦予執行權限
Bash
chmod +x cloudns_ddns.sh

3. 執行安裝
請使用 root 權限執行：
Bash
sudo ./cloudns_ddns.sh

4. 依照提示操作
輸入您的 ClouDNS Dynamic URL。
輸入您希望每天執行的時間（例如 08 點 30 分）。
腳本會自動完成剩餘設定。

📝 日誌查看 (Logs)
預設日誌路徑為：
Bash
tail -f /var/log/cloudns_ddns.log
